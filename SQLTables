CREATE DATABASE Unicycles;

CREATE TABLE User (
User_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
Forename VARCHAR(20) NOT NULL,
Surname VARCHAR(20) NOT NULL,
DoB DATE NOT NULL,
Email_Address VARCHAR(45) UNIQUE NOT NULL,
Phone VARCHAR(15) UNIQUE NOT NULL,
Is_Student BOOLEAN DEFAULT FALSE,
Is_Lecturer BOOLEAN DEFAULT FALSE,
Is_Other_Staff BOOLEAN DEFAULT FALSE,
UP_Number VARCHAR(6) UNIQUE,
Password VARCHAR(20) NOT NULL
);

CREATE TABLE Depot (
Depot_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
Maximum_Storage INTEGER NOT NULL,
Depot_Location VARCHAR(200) NOT NULL
);

CREATE TABLE Bike (
Bike_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
Bike_Type VARCHAR(20) NOT NULL,
Working_Condition BOOLEAN DEFAULT true,
Depot_ID INTEGER NOT NULL,
Insured BOOLEAN DEFAULT true,

CONSTRAINT FOREIGN KEY (Depot_ID) REFERENCES Depot (Depot_ID) );

CREATE TABLE Bike_Store (
Store_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
Store_Name VARCHAR(30) NOT NULL,
Owner_Forename VARCHAR(20) NOT NULL,
Owner_Surname VARCHAR(20) NOT NULL,
Store_Email VARCHAR(45) NOT NULL,
Store_Phone VARCHAR(15) NOT NULL,
Store_Address VARCHAR(200) NOT NULL
);

CREATE TABLE Store_Sold_Bike (
Bike_ID INTEGER NOT NULL,
Store_ID INTEGER NOT NULL,

CONSTRAINT FOREIGN KEY (Bike_ID) REFERENCES Bike (Bike_ID),
CONSTRAINT FOREIGN KEY (Store_ID) REFERENCES Store (Store_ID) );

CREATE TABLE REQUEST (
Request_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
User_ID INTEGER NOT NULL,
Bike_From VARCHAR(200) NOT NULL,
Bike_To VARCHAR(200) NOT NULL,
Bike_ID INTEGER NOT NULL,
Time_Of_Departure TIME NOT NULL,
Date_Of_Departure DATE NOT NULL,

CONSTRAINT FOREIGN KEY (Bike_ID) REFERENCES Bike (Bike_ID),
CONSTRAINT FOREIGN KEY (User_ID) REFERENCES User (User_ID) );
